# Jenkins username and password the agents should use to authenticate with the client.
# Both master and repo machines have specific agents: agent_on_master and building_repostory respectively
# That make use of this configuration as well.
# If you use the [GitHub authentication plugin](https://plugins.jenkins.io/github-oauth/) as the authentication
# provider for Jenkins you will want to register it as a [GitHub application](https://github.com/settings/applications/new)
# and set this to a GitHub username and access token.
jenkins::slave::ui_user: 'admin'
jenkins::slave::ui_pass: 'changeme'
# The version of the swarm client plugin should be the same between the jenkins master and agents on all hosts.
# Note that versions above 3.0 require use of a modified version of the docker puppet module
jenkins::swarm_version: &jenkins_swarm_version '3.14'
jenkins::slave::version: *jenkins_swarm_version

# This should be unchanged so that the masterurl always uses the hosts entry to reach master.
jenkins::slave::masterurl: 'http://192.168.50.10:8080'

master::ip: 192.168.50.10
repo::ip: 192.168.50.11

# change this to match the timezone that this buildfarm is located in.
timezone: 'Europe/Madrid'

# SSH keys to be added to each host.
# The jenkins-agent public key is one you'll want to generate specifically for your deployment.
# An example:
#    $ ssh-keygen -m PEM -t rsa -b 4096 -C "jenkins-agent@my-buildfarm" -f buildfarm_deployment_rsa
# Then copy the type and key in buildfarm_deployment_rsa.pub into the jenkins-agent@my-buildfarm key field below.
# The user field should remain jenkins-agent so it can be used to authenticate with the jenkins-agent user on the repo host.
#
# The contents of the private key in the example above buildfarm_deployment_rsa
# should be copied to the `jenkins::private_ssh_key` field of hiera/hieradata/buildfarm_role/master.yaml
# where it will be added via ssh-agent to running jenkins jobs on all agents.
ssh_keys:
  # Using the `buildfarm_deployment_rsa.pub` in the above example
  # you'll split the file contentsinto three different components separated by spaces:
  # * type: always ssh-rsa for rsa keys but different for other key types.
  # * public key value: The verbatim text of your public key base64-encoded.
  #   Depending on the key length this may be very long and include one or two trailing `=` of padding.
  # * comment: a plaintext "comment" which is generally used as a label identifying the key.
  # For example consider the key below:
  #     ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQCuIjV8RI7QOay95BAOuv9NlaKlm0xMfD9Q12ynKPElW+1cYhOmdmqrRqavbYxD9v2wB4hRl7VDsJak0w21UakyfKAZjhhmiMUA1yaQtJCKvw5RFbM6O/QmPNAnQDaVR2X1tRW5DVvbO2Z7ppQIHD3Ln3t5yYI/fwOgfBIsgr09Pw== jenkins-agent@my-buildfarm
  # * The type is `ssh-rsa`.
  # * The key value is `AAAAB3NzaC1yc2EAAAADAQABAAAAgQCuIjV8RI7QOay95BAOuv9NlaKlm0xMfD9Q12ynKPElW+1cYhOmdmqrRqavbYxD9v2wB4hRl7VDsJak0w21UakyfKAZjhhmiMUA1yaQtJCKvw5RFbM6O/QmPNAnQDaVR2X1tRW5DVvbO2Z7ppQIHD3Ln3t5yYI/fwOgfBIsgr09Pw==`.
  # * The comment is `jenkins-agent@my-buildfarm`.
  #
  # Use the comment as the key name
  'vagrant@rosin-test-beta':
    key: 'AAAAB3NzaC1yc2EAAAADAQABAAACAQC59VI+PC6DU2ToReEQKKzGPNsa4/8DDslIC2kQSKRpMLnPw7YkwJoV0W6C35gCCltvOxJmnaPcnoIvtpGuULFN9jwhLeIBwwJ7EtNJ/7sdXsGdMzW6rh3buttkyx3yk28OovqhAtraz4C9Qi/QRfOVX7DoV+vC42UMhw7mI1FQU1ixpOZar3e2bpYUNyCao75htr+9+hiKUbR9Gm0DKJltbqxlpIJPf56NSSYBelLVnn7NC3FTdWO3aRwpZJgy7Kze4o5d4/af/x0kmQ979/5ia1wvcGfLNv/VBvbCUsHzBcKCHguS8EzkHFep0qQTeCDdbbUTVE7QUam3Ox2IAh3GDtE2yC6p2KnksZUZ+MHUFfBn2AsC5zFMNMRTTh0jtzXodbDmxGukM5ObQ4YW6lO4L7WgKxEhyqt4vWaoWGHsw0R5yBf1xWe2CnD3k4bpZYg2B+5f1Z1mLTcwSLqK+255OhQSytuk+09+1nyfazN/2EbDTBD644YqTPF/otqC6wpc4JPav9+B5lDxw3uTjORhDSC4Iobw3Y2+LnZqVz6R81rbSSByNtamOlDdUIfLoOfUJ90JItAdaQ3JrXLu3bTG5HIOFfnnu6YVQq0VOZqek3T64th8OHCPEBoHZTvUeIOFcdhJBPpW1KNTkbr91LNKHOjHmPOMLTL25kAai8Nylw=='
    type: ssh-rsa
    user: jenkins-agent
    require: 'User[jenkins-agent]'
ssh_host_keys:
  ssh_host_keys:
    repo: '# 192.168.50.11:22 SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.9 192.168.50.11
      ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDPOCbhnDcK/whhj22vx3a9S5mPW2sBEtI2KmgoJd49Sgx2gr6bLlbMsHx5FDon+gUT1cooO5FI5LxnyIjXCjkd5JpR+4AUOn343sTzSAT7HgQi950e15/is1fcttVr6Rv0oDgrEYvzbyrha4yM9vSETrimFs4BMCk5B3PXfbJYqlS/qItKpKGyQDUsYC8vHeR+KQ5zz+xgLGuibrpB7IYtCXQjm7VoUtp14O/cdaI0Cj52AYEYB/aVedOCzwcxL6sqOTxH5FTrQA3jmnH73Nrohe4r4JrBoujNjp575bo1xiVQ+W7W1TrB9xUJtyYTUpPvL/PRFbC8JUdjWQ2Pic52jyprt/jafq9YlH4d2KDOlCKX0cSwYE3xwyWAAogOL72Vs4r3Ib/v7UhsEknajahO926oF7ggC1IuJofbFKdvlNZVd1lfvGHe6D1IfPjrnlWraq47TlNsrIPLkd+EkpJ/YNKHA/C6EIQqM/BuqBqhKkw+DEad8S7/DVzwyjOaamE=
      # 192.168.50.11:22 SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.9 192.168.50.11 ssh-ed25519
      AAAAC3NzaC1lZDI1NTE5AAAAIImdbRTjeyZVDkdvrtxEWH4YOaduzvrSPZZSUbbgaLsR # 192.168.50.11:22
      SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.9 192.168.50.11 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBHelBiUjacJWyJlL8lZRxqp9V3StqIzNrafbbjUWFh524Dbd/dQEuMHc+wj00ZCn9rvJ3VeHDMgzrg1s1AL/16A=
      # 192.168.50.11:22 SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.9 # 192.168.50.11:22
      SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.9'
    '#': '# github.com:22 SSH-2.0-babeld-9ff4dbf2 github.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCj7ndNxQowgcQnjshcLrqPEiiphnt+VTTvDP6mHBL9j1aNUkY4Ue1gvwnGLVlOhGeYrnZaMgRK6+PKCUXaDbC7qtbW8gIkhL7aGCsOr/C56SJMy/BCZfxd1nWzAOxSDPgVsmerOBYfNqltV9/hWCqBywINIR+5dIg6JTJ72pcEpEjcYgXkE2YEFXV1JHnsKgbLWNlhScqb2UmyRkQyytRLtL+38TGxkxCflmO+5Z8CSSNY7GidjMIZ7Q4zMjA2n1nGrlTDkzwDCsw+wqFPGQA179cnfGWOWRVruj16z6XyvxvjJwbz0wQZ75XK5tKSb7FNyeIEs4TT4jk+S4dhPeAUC5y+bDYirYgM4GC7uEnztnZyaVWQ7B381AK4Qdrwt51ZqExKbQpTUNn+EjqoTwvqNj4kqx5QUCI0ThS/YkOxJCXmPUWZbhjpCg56i+2aB6CmK2JGhn57K5mj0MNdBXA4/WnwH6XoPWJzK5Nyu2zB3nAZp+S5hpQs+p1vN1/wsjk=
      # github.com:22 SSH-2.0-babeld-9ff4dbf2 github.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBEmKSENjQEezOmxkZMy7opKgwFB9nkt5YRrYMjNuG5N87uRgg6CLrbo5wAdT/y6v0mKV0U2w0WZ2YB/++Tpockg=
      # github.com:22 SSH-2.0-babeld-9ff4dbf2 github.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOMqqnkVzrm0SdG6UOoqKLsabgH5C9okWi0dh2l9GKJl
      # github.com:22 SSH-2.0-babeld-4a94ee6b # github.com:22 SSH-2.0-babeld-9ff4dbf2'
autoreconfigure: false
# Pay special attention to the Git branch name that appears twice in the invocation below.
autoreconfigure::command: 'bash -c "cd /root/buildfarm_deployment_config && git fetch
  origin xenialize && git reset --hard origin/xenialize && ./reconfigure.bash"'

# This docker option is being removed from the upstream puppetlabs-docker module.
# It isn't required on Ubuntu Xenial and causes an error when deploying to AWS with the default AWS kernel.
#
# By the time our project is able to move to the new puppet module (requires puppet >= 4.0) this option will probably
# be removed.
# https://github.com/puppetlabs/puppetlabs-docker/issues/38
docker::manage_kernel: false

# Unless you have explicit needs with the docker version
# The values below should not be changed.
docker::package_name: docker-ce
docker::package_source_location: https://download.docker.com/linux/ubuntu
docker::package_key_source: https://download.docker.com/linux/ubuntu/gpg
docker::package_key: 9DC858229FC7DD38854AE2D88D81803C0EBFCD88
docker::package_release: xenial
docker::package_repos: stable
docker::service_overrides_template: agent_files/docker-service-overrides.conf.erb

# Classes to be pulled in via hiera_include classes.
#classes:
    # Enables the New Relic sysmon daemon.
    # A license key / api key is required to use it.
    #- nrsysmond
# License key required for nrsysmond class above
# nrsysmond::license_key: xxxyyyyzzzz
